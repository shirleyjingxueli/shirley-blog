# k8s
  k8s 是一个用于自动部署、扩展和管理容器化应用程序的开源系统。
## 背景
### k8s要解决的问题
  - 运行容器镜像
  - 按照用户意愿和系统规则，完全自动化处理各个容器之间的关系
### k8s 项目架构
  k8s 项目由 Master 和 Node 两种节点组成，而这两种角色分别对应着控制节点和计算节点。

  其中，控制节点，即 Master 节点， 由三个紧密协作的独立组件组合而成，它们分别是负责 API 服务的 kube-apiserver、负责调度的 kube-scheduler，以及负责容器编排的 kube-controller-manager。整个集群的持久化数据，则由 kube-apiserver 处理后保存在 Etcd中。

  而计算节点上最核心的部分，则是一个叫作 kubelet 的组件。

  k8s 着重解决的问题是**运行在大规模集群的各种任务之间，实际存在着各种各样的关系。这些关系的处理，才是作业编排和管理系统最困难的地方。**
  
  k8s 项目的主要设计思想是 **从更宏观的角度，以统一的方式来定义任务之间的各种关系，并且为将来支持更多类的关系留有余地。**

#### kubelet 的作用  
  1. kubelet 主要负责同容器运行时（比如 docker 项目）打交道。 
  2. 通过 gRPC 协议同一个叫作 Device Plugin 的插件进行交互。
  3. 调用网络插件和存储插件为容易配置网络和持久化存储。

#### k8s 核心设计理念
  - 首先通过一个编排对象，比如 Pod，Job, CronJob等，来描述你视图管理的应用
  - 然后，再为其定义一些“服务对象”，比如 Service、Secret、Horizontal Pod Autoscaler(自动水平扩展器等)。这些对象，会负责具体的平台级功能。

  这种使用方法，就是所谓的声明式API。这种 API 对应的编排对象 和 服务对象， 都是 k8s 项目中的 API 对象。

  **k8s 项目所擅长的，是按照用户的意愿和整个系统的规则，完全自动化地处理好容器之间的各种关系。这种功能就是编排。**

  **k8s** 项目为用户踢动的不仅限于一个工具。它真正的价值，乃在于提供了医药基于容器构建分布式系统的基础依赖。

### 基础名词
  - **Pod:** 将容器进行分类。Pod 里的容器共享同一个 Network Namespace、同一组数据卷，从而达到高效率交换信息的目的。
    - 对于 web 应用与数据库之间的访问关系，k8s 给 Pod 绑定了一个 service， 而 service 服务声明的 IP 地址等信息是 “终生不变的”。**这个 service 服务的主要作用，就是为 Pod 的代理入口(Portal),从而代替 Pod 堆外暴露一个固定的网络地址。**
  - **Job:**  用来描述一次性运行的 Pod。 

